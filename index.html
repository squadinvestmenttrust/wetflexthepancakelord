<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WET FLEX THE PANCAKE LORD</title>
    
    <!-- Scripts for React, Babel, and Tailwind -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #4A8C6F;
            overflow-x: hidden;
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #fef3c7;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #8b4513;
            border-radius: 10px;
        }

        html {
            scroll-behavior: smooth;
        }

        @media (max-width: 640px) {
            .hero-title {
                font-size: 3.5rem !important;
                line-height: 0.9;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        const Icon = ({ name, size = 24, className = "", fill = "none" }) => {
            const icons = {
                Search: <path d="M21 21l-4.35-4.35M19 11a8 8 0 11-16 0 8 8 0 0116 0z" />,
                MapPin: <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0zM12 13a3 3 0 100-6 3 3 0 000 6z" />,
                Star: <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />,
                Flame: <path d="M8.5 14.5A2.5 2.5 0 0011 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 11-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 002.5 2.5z" />,
                X: <path d="M18 6L6 18M6 6l12 12" />,
                ChevronRight: <path d="M9 18l6-6-6-6" />,
                ArrowUpDown: <path d="M7 15l5 5 5-5M7 9l5-5 5 5" />,
                Loader2: <path d="M21 12a9 9 0 11-6.219-8.56" />
            };

            return (
                <svg 
                    width={size} 
                    height={size} 
                    viewBox="0 0 24 24" 
                    fill={fill} 
                    stroke="currentColor" 
                    strokeWidth="3" 
                    strokeLinecap="round" 
                    strokeLinejoin="round" 
                    className={`${className} ${name === 'Loader2' ? 'animate-spin' : ''}`}
                >
                    {icons[name] || null}
                </svg>
            );
        };

        const SPREADSHEET_CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQZeYhMo6Lzsy-gkP-P4zjLJGinRb6EMR4vbE5pdhGnHVoUlzXtjJybyWoZ51NnCdDWvUUu_bpRD73c/pub?output=csv";

        const PUNS = [
            "SYRUP ME UP",
            "WITNESS THE STACK",
            "WAFFLING ON",
            "TOASTED & ROASTED",
            "BUTTER BE GOOD",
            "FLEX THE FLUFF",
            "GRIDDLE ME THIS",
            "TOTAL BATTER-Y"
        ];

        const SyrupDrip = ({ className }) => (
            <svg viewBox="0 0 100 20" className={className} preserveAspectRatio="none">
                <path d="M0 0h100v10c-5 0-5 5-10 5s-5-5-10-5-5 5-10 5-5-5-10-5-5 5-10 5-5-5-10-5-5 5-10 5-5-5-10-5-5 5-10 5-5-5-10-5-5 5-10 5V0z" fill="currentColor" />
            </svg>
        );

        const App = () => {
            const [data, setData] = useState([]);
            const [loading, setLoading] = useState(true);
            const [searchQuery, setSearchQuery] = useState("");
            const [selectedLocation, setSelectedLocation] = useState("All");
            const [selectedType, setSelectedType] = useState("All");
            const [selectedItem, setSelectedItem] = useState(null);

            const goHome = () => {
                setSearchQuery("");
                setSelectedLocation("All");
                setSelectedType("All");
                setSelectedItem(null);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };

            useEffect(() => {
                const fetchData = async () => {
                    try {
                        const response = await fetch(SPREADSHEET_CSV_URL);
                        const csvText = await response.text();
                        const rows = csvText.split('\n').slice(1);
                        const parsedData = rows.map((row, idx) => {
                            const columns = row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                            return {
                                id: idx,
                                name: columns[0]?.replace(/"/g, '').trim() || "Unknown",
                                location: columns[1]?.replace(/"/g, '') || "Unknown",
                                score: parseFloat(columns[2]) || 0,
                                photo: columns[3]?.replace(/"/g, '') || "https://images.unsplash.com/photo-1554520735-0ad66a951bb8?w=800",
                                review: columns[4]?.replace(/"/g, '') || "",
                                type: columns[5]?.replace(/"/g, '').trim() || "Pancake"
                            };
                        }).filter(item => item.name !== "");
                        setData(parsedData);
                        setLoading(false);
                    } catch (err) {
                        setLoading(false);
                    }
                };
                fetchData();
            }, []);

            const filteredData = useMemo(() => {
                return data.filter(item => {
                    const searchStr = `${item.name} ${item.location} ${item.review} ${item.type}`.toLowerCase();
                    const matchesSearch = searchQuery === "" || searchQuery.toLowerCase().split(' ').every(q => searchStr.includes(q));
                    const matchesLocation = selectedLocation === "All" || item.location === selectedLocation;
                    const matchesType = selectedType === "All" || item.type.toLowerCase() === selectedType.toLowerCase();
                    return matchesSearch && matchesLocation && matchesType;
                }).sort((a, b) => b.score - a.score);
            }, [data, searchQuery, selectedLocation, selectedType]);

            const uniqueLocations = ["All", ...new Set(data.map(item => item.location))];
            const categories = ["All", "Pancake", "Waffle", "French Toast"];

            return (
                <div className="min-h-screen text-gray-900 selection:bg-amber-400">
                    {/* Header */}
                    <nav className="sticky top-0 z-50 bg-[#E69345] border-b-4 border-[#8B4513]">
                        <div className="max-w-7xl mx-auto px-4 h-16 flex items-center justify-center">
                            <button onClick={goHome} className="flex items-center gap-2">
                                <span className="text-xl">ðŸ¥ž</span>
                                <h1 className="text-xl font-black text-white uppercase italic leading-none">
                                    WET FLEX THE PANCAKE LORD
                                </h1>
                            </button>
                        </div>
                        <SyrupDrip className="absolute bottom-[-10px] left-0 w-full h-3 text-[#E69345]" />
                    </nav>

                    {/* Hero */}
                    <header className="pt-16 pb-24 px-4 text-center max-w-4xl mx-auto">
                        <p className="text-amber-400 font-black text-sm uppercase tracking-widest mb-2">WET FLEX PRESENTS:</p>
                        <h2 className="hero-title text-6xl sm:text-8xl font-black text-white mb-6 uppercase italic tracking-tighter drop-shadow-lg">
                            WET FLEX THE <br/> PANCAKE LORD
                        </h2>
                        
                        <div className="flex justify-center gap-4 text-white/50 font-black text-xs uppercase mb-8">
                            <span>PANCAKE</span>
                            <span>WAFFLES</span>
                            <span>FRENCH TOAST</span>
                        </div>

                        <p className="text-lg sm:text-xl text-white font-bold leading-tight bg-black/20 p-6 rounded-2xl border-2 border-white/10 italic">
                            "IN THE BEGINNING, THERE WAS PANCAKE. THEN THE LORD SAID 'LET THERE BE WAFFLES AND FRENCH TOAST'"
                        </p>
                    </header>

                    {/* Filters */}
                    <div className="px-4 -mt-12 relative z-20 max-w-5xl mx-auto">
                        <div className="bg-amber-100 p-4 rounded-3xl shadow-2xl border-4 border-amber-900 flex flex-col gap-3">
                            <div className="relative">
                                <Icon name="Search" size={18} className="absolute left-4 top-1/2 -translate-y-1/2 text-amber-600" />
                                <input 
                                    type="text" 
                                    placeholder="Keywords (Giant, Chocolate, Tampa...)"
                                    className="w-full pl-10 pr-4 py-4 rounded-xl border-2 border-amber-200 focus:border-amber-500 font-bold bg-white outline-none"
                                    value={searchQuery}
                                    onChange={(e) => setSearchQuery(e.target.value)}
                                />
                            </div>
                            <div className="grid grid-cols-2 gap-2">
                                <div className="space-y-1">
                                    <label className="text-[10px] font-black uppercase text-amber-900 ml-1">Choose your poison</label>
                                    <select 
                                        className="w-full p-3 rounded-xl border-2 border-amber-200 bg-white font-black text-sm text-amber-800 outline-none"
                                        value={selectedType}
                                        onChange={(e) => setSelectedType(e.target.value)}
                                    >
                                        {categories.map(cat => <option key={cat} value={cat}>{cat}</option>)}
                                    </select>
                                </div>
                                <div className="space-y-1">
                                    <label className="text-[10px] font-black uppercase text-amber-900 ml-1">Location</label>
                                    <select 
                                        className="w-full p-3 rounded-xl border-2 border-amber-200 bg-white font-black text-sm text-amber-800 outline-none"
                                        value={selectedLocation}
                                        onChange={(e) => setSelectedLocation(e.target.value)}
                                    >
                                        {uniqueLocations.map(loc => <option key={loc} value={loc}>{loc}</option>)}
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Grid */}
                    <main className="max-w-7xl mx-auto px-4 py-12">
                        {loading ? (
                            <div className="text-center py-20">
                                <Icon name="Loader2" size={48} className="text-amber-400 mx-auto" />
                            </div>
                        ) : (
                            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                                {filteredData.map((item, idx) => (
                                    <div key={item.id} className="bg-white rounded-3xl overflow-hidden border-4 border-amber-900 shadow-[8px_8px_0px_#8B4513]">
                                        <div className="relative h-56">
                                            <img src={item.photo} alt={item.name} className="w-full h-full object-cover" />
                                            <div className="absolute top-3 right-3 bg-amber-400 border-2 border-amber-900 px-3 py-1 rounded-xl font-black text-lg rotate-3">
                                                {item.score}
                                            </div>
                                        </div>
                                        <div className="p-5">
                                            <p className="text-[10px] font-black text-amber-600 uppercase mb-1 tracking-widest">{item.location} â€¢ {item.type}</p>
                                            <h3 className="text-xl font-black text-gray-900 mb-4 leading-none uppercase italic">{item.name}</h3>
                                            <button 
                                                onClick={() => setSelectedItem(item)}
                                                className="w-full py-3 bg-[#E69345] text-white rounded-xl font-black text-sm border-b-4 border-amber-800 active:border-b-0 active:translate-y-1 transition-all flex items-center justify-center gap-2 uppercase italic"
                                            >
                                                {PUNS[idx % PUNS.length]}
                                                <Icon name="ChevronRight" size={16} />
                                            </button>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}
                    </main>

                    {/* Simple Modal */}
                    {selectedItem && (
                        <div className="fixed inset-0 z-[100] flex items-center justify-center p-4">
                            <div className="absolute inset-0 bg-amber-900/90 backdrop-blur-sm" onClick={() => setSelectedItem(null)} />
                            <div className="relative bg-white w-full max-w-lg rounded-3xl border-4 border-amber-900 shadow-2xl overflow-hidden animate-in zoom-in duration-200">
                                <div className="h-48 relative">
                                    <img src={selectedItem.photo} alt={selectedItem.name} className="w-full h-full object-cover" />
                                    <button onClick={() => setSelectedItem(null)} className="absolute top-4 right-4 bg-amber-900 text-white p-2 rounded-full border-2 border-white shadow-lg">
                                        <Icon name="X" size={18} />
                                    </button>
                                </div>
                                <div className="p-6 max-h-[50vh] overflow-y-auto custom-scrollbar">
                                    <div className="flex justify-between items-start mb-4">
                                        <h2 className="text-2xl font-black text-amber-900 uppercase italic leading-none">{selectedItem.name}</h2>
                                        <div className="bg-amber-400 border-2 border-amber-900 px-3 py-1 rounded-xl font-black">{selectedItem.score}</div>
                                    </div>
                                    <p className="text-sm font-bold text-amber-800 leading-relaxed italic border-l-4 border-amber-200 pl-4">
                                        "{selectedItem.review}"
                                    </p>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Footer */}
                    <footer className="bg-amber-900 text-amber-200 py-12 px-6 border-t-4 border-amber-950 text-center">
                        <h3 className="text-2xl font-black text-white uppercase italic mb-6">STAY STICKY. GET JACKED.</h3>
                        <div className="flex justify-center gap-4 mb-4">
                            {['IG', 'TW', 'YT'].map(s => (
                                <div key={s} className="w-12 h-12 bg-amber-800 rounded-xl border-b-4 border-amber-950 flex items-center justify-center font-black hover:bg-amber-400 hover:text-amber-900 transition-all cursor-pointer">{s}</div>
                            ))}
                        </div>
                        <p className="text-[10px] font-black uppercase opacity-40">Â© 2024 WET FLEX THE PANCAKE LORD</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
